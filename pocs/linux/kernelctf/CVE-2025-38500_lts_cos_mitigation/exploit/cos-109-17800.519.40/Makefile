.PHONY: clean


all: exploit

prerequisites:
	sudo apt-get install libnl-nf-3-dev

exploit: exploit.c
	# the nl protocol library suite contains multiple libs
	# we want "libnl" (core) and "libnl-gnl" (generic netlink extension)
	# "-3" is the version (latest 3.x)

	# to get -I and -l: execute '$(pkg-config --cflags --libs libnl-genl-3.0)'
	gcc -o $@ $+ -I/usr/include/libnl3 -lnl-nf-3 -lnl-route-3 -lnl-3 -static 

real_exploit: exploit.c
	gcc -o $@ $+ -DKASLR_BYPASS_INTEL=1 -I/usr/include/libnl3 -lnl-nf-3 -lnl-route-3 -lnl-3 -static

clean:
	rm -rf exploit
